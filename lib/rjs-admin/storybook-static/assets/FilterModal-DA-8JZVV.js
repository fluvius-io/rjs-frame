import{j as e}from"./jsx-runtime-BjG_zV1W.js";import{f as i,t as x,C as y,Q as b}from"./QueryBuilder-yOD016_Y.js";import{r}from"./iframe-4KYKMOYs.js";const g=({isOpen:t,metadata:u,currentQuery:s,onClose:o,onApply:d})=>{const[c,n]=r.useState({selectedFields:[],sortRules:[],filterRules:[]}),m=r.useMemo(()=>i({query:s}),[s]);r.useEffect(()=>{t&&n(i({query:s}))},[t,s]);const f=r.useCallback(a=>{n(a)},[]),h=r.useCallback(()=>{const a=x(c);d(a),o()},[c,d,o]),l=r.useCallback(()=>{n(i({query:s})),o()},[s,o]);return r.useEffect(()=>{const a=p=>{p.key==="Escape"&&t&&l()};if(t)return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t,l]),t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Manage Filters"}),e.jsx("button",{onClick:l,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",title:"Close",children:e.jsx(y,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsx(b,{metadata:u,initialQuery:m,onQueryChange:f,title:"",className:"border-0 shadow-none",showFieldSelection:!1,showSortRules:!1,showFilterRules:!0,showQueryDisplay:!1},`filter-modal-${t?"open":"closed"}-${s||"no-filters"}`)}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t bg-gray-50",children:[e.jsx("button",{onClick:l,className:"inline-flex items-center px-3 py-1 text-sm border rounded bg-white hover:bg-gray-50 font-medium",children:"Cancel"}),e.jsx("button",{onClick:h,className:"inline-flex items-center px-3 py-1 text-sm border rounded bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"Apply Filters"})]})]})}):null};g.__docgenInfo={description:"",methods:[],displayName:"FilterModal",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},metadata:{required:!0,tsType:{name:"QueryMetadata"},description:""},currentQuery:{required:!1,tsType:{name:"string"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onApply:{required:!0,tsType:{name:"signature",type:"function",raw:"(query: ResourceQuery) => void",signature:{arguments:[{type:{name:"ResourceQuery"},name:"query"}],return:{name:"void"}}},description:""}}};export{g as F};
