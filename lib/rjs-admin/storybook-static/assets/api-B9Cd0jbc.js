import{R as K,r as u}from"./iframe-4KYKMOYs.js";function Pt(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var e=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),e}var Ge={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De;function Ot(){if(De)return Q;De=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function e(r,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:t,type:r,key:o,ref:a!==void 0?a:null,props:s}}return Q.Fragment=n,Q.jsx=e,Q.jsxs=e,Q}Ge.exports=Ot();var d=Ge.exports;let M=[],q=0;const te=4;let _t=t=>{let n=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(r){return e.lc=n.push(r),()=>{for(let s=q+te;s<M.length;)M[s]===r?M.splice(s,te):s+=te;let a=n.indexOf(r);~a&&(n.splice(a,1),--e.lc||e.off())}},notify(r,a){let s=!M.length;for(let o of n)M.push(o,e.value,r,a);if(s){for(q=0;q<M.length;q+=te)M[q](M[q+1],M[q+2],M[q+3]);M.length=0}},off(){},set(r){let a=e.value;a!==r&&(e.value=r,e.notify(a))},subscribe(r){let a=e.listen(r);return r(e.value),a},value:t};return e};const ge="/-/",Ze=/^[a-zA-Z0-9_]([a-zA-Z0-9_\.-]*)?$/;function et(t){let n=t.pageName||"Home";return t.breadcrumbs&&t.breadcrumbs.length>0&&(n=`${n} | ${t.breadcrumbs.join(" > ")}`),typeof document<"u"&&document.title!=n&&(document.title=n),n}function It(t,n){const{pageParams:e}=t,r=n.indexOf(ge),a=Mt(e);if(r!==-1){const s=n.substring(0,r);return a?`${s}${ge}${a}`:s}else return a?`${n}${ge}${a}`:n}function Tt(t){const{linkParams:n}=t,e=new URLSearchParams;return Object.entries(n).forEach(([r,a])=>{r&&e.set(r,a)}),e.toString()}function Lt(t){if(typeof window>"u")return;const{pageName:n,pageParams:e,linkParams:r}=t,a=window.location.pathname,s=It(t,a).replace(/^\/+/,"/"),o=a!==s,l=Tt(t),i=`${s}${l?"?"+l:""}`,c=et(t);if(i===window.location.href)return;const h={pageName:n,pagePath:s,pageParams:e,linkParams:r,breadcrumbs:t.breadcrumbs||[]};o?window.history.pushState(h,c,i):window.history.replaceState(h,c,i)}function tt(t){return Ze.test(t)}function Mt(t){return Object.entries(t).map(([n,e])=>tt(n)?e===!0?n:e===!1?`${n}:`:e&&e!==""?`${n}:${e}`:n:(console.warn(`[RJS-Frame] Invalid fragment name "${n}". Fragment names must start with letter/digit/underscore, then can contain dots and dashes. Skipping this fragment.`),null)).filter(Boolean).join("/")}const nt="rjs-frame:globalState",rt="rjs-frame:moduleState",at=(t,n)=>{try{if(typeof window>"u")return n;const e=localStorage.getItem(t);return e?JSON.parse(e):n}catch(e){return console.warn(`Failed to load ${t} from localStorage:`,e),n}},We=(t,n)=>{try{if(typeof window>"u")return;localStorage.setItem(t,JSON.stringify(n))}catch(e){console.warn(`Failed to save ${t} to localStorage:`,e)}},Ut=()=>at(nt,{_id:"",xRay:!1}),Dt=()=>at(rt,{}),Wt={pageName:"",initTime:new Date().toISOString(),breadcrumbs:[],pageParams:{},linkParams:{},globalState:Ut(),moduleState:Dt(),auth:{},other:{}},T=_t(Wt),G=t=>{const n=T.get();let e=t(n);JSON.stringify(n.globalState)!==JSON.stringify(e.globalState)&&We(nt,e.globalState),JSON.stringify(n.moduleState)!==JSON.stringify(e.moduleState)&&We(rt,e.moduleState),T.set(e)},Ft=t=>{G(n=>({...n,globalState:{...n.globalState,...t}}))},Vt=(t,n)=>T.get().globalState[t]??n,qt=(t,n)=>{Ft({[t]:n})},Fe=()=>Vt("xRay",!1),Ve=t=>{qt("xRay",t)},zt=t=>{T.get(),G(e=>({...e,pageParams:t}));const n=T.get();Lt(n)},qe=t=>{G(n=>({...n,pageName:t})),et(T.get())};function Jt({onArgumentsChange:t}){const[n,e]=u.useState(T.get()),[r,a]=u.useState([]),[s,o]=u.useState([]),l=u.useRef(1),i=u.useRef(null);u.useEffect(()=>(i.current=T.subscribe(f=>{e(f)}),()=>{i.current&&(i.current(),i.current=null)}),[]);const{pageParams:c={}}=n||{},h=u.useCallback(f=>f.trim()?tt(f)?{isValid:!0}:{isValid:!1,error:`Invalid name. Must match pattern: ${Ze.source}`}:{isValid:!1,error:"Fragment name cannot be empty"},[]),p=u.useCallback(f=>Object.entries(f).map(([S,x])=>{const N=h(S);return{id:`param-${l.current++}`,key:S,value:typeof x=="boolean"?x:String(x),isValid:N.isValid}}),[h]);u.useEffect(()=>{const f=[];r.forEach(S=>{if(!S.isValid){const x=h(S.key);x.isValid||f.push({id:S.id,message:x.error||"Invalid fragment name"})}}),o(f)},[r,h]),u.useEffect(()=>{const f=p(c);a(f)},[c,p]);const m=u.useCallback(f=>{const S={};return f.forEach(({key:x,value:N,isValid:V})=>{x&&V&&(S[x]=N)}),S},[]),g=u.useCallback(f=>{const S=m(f);zt(S),t&&t(S)},[m,t]),b=u.useCallback(()=>{const f={id:`param-${l.current++}`,key:`param${r.length+1}`,value:`value${r.length+1}`,isValid:!0},S=[...r,f];a(S),g(S)},[r,g]),C=u.useCallback((f,S,x)=>{a(N=>N.map(V=>{if(V.id===f){const Ue={...V,[S]:x};if(S==="key"){const At=h(String(x));Ue.isValid=At.isValid}return Ue}return V}))},[h]),y=u.useCallback(()=>{const f=r.filter(S=>S.isValid&&S.key.trim());g(f)},[r,g]),w=u.useCallback(f=>{if(f.key==="Enter"){const S=r.filter(x=>x.isValid&&x.key.trim());g(S)}},[r,g]),v=u.useCallback(f=>{const S=r.filter(x=>x.id!==f);a(S),g(S)},[r,g]),R=u.useCallback(f=>{const S=r.map(x=>x.id===f?{...x,value:typeof x.value=="boolean"?!x.value:!0}:x);a(S),g(S)},[r,g]),$=s.length>0,L=r.filter(f=>f.isValid).length;return d.jsxs("section",{className:"pageparams-manager",children:[d.jsxs("h3",{children:["Page Params Manager ",$&&d.jsxs("span",{className:"error-count",children:["(",s.length," errors)"]})]}),d.jsxs("div",{className:"pageparams-manager__info",children:[d.jsxs("div",{className:"pageparams-manager__info-item",children:[d.jsx("strong",{children:"URL Pattern:"})," /path/-/param_name:value/boolean_flag"]}),d.jsxs("div",{className:"pageparams-manager__info-item",children:[d.jsx("strong",{children:"Active Params:"})," ",L," valid"]}),d.jsxs("div",{className:"pageparams-manager__info-current",children:["Current: ",Object.entries(c||{}).length?Object.entries(c||{}).map(([f,S])=>`${f}:${S}`).join(", "):"none"]})]}),$&&d.jsxs("div",{className:"pageparams-manager__validation-errors",children:[d.jsx("strong",{children:"Validation Errors:"}),d.jsx("br",{}),"Parameter names must start with letter/digit/underscore, then can contain dots and dashes",d.jsx("br",{}),d.jsx("small",{children:"Names cannot start with a dash or dot, but can contain them after the first character."})]}),d.jsx("div",{className:"pageparams-manager__list",children:r.map(f=>{const S=s.find(N=>N.id===f.id),x=typeof f.value=="boolean";return d.jsxs("div",{className:`pageparams-manager__param ${f.isValid?"pageparams-manager__param--valid":"pageparams-manager__param--invalid"}`,children:[d.jsxs("div",{className:"pageparams-manager__param-header",children:[d.jsxs("div",{className:"pageparams-manager__param-name-container",children:[d.jsx("label",{className:"pageparams-manager__param-label",children:"Name:"}),d.jsx("input",{value:f.key,onChange:N=>C(f.id,"key",N.target.value),onBlur:y,onKeyDown:w,placeholder:"param_name",className:`pageparams-manager__param-input ${f.isValid?"pageparams-manager__param-input--valid":"pageparams-manager__param-input--invalid"}`}),S&&d.jsx("div",{className:"pageparams-manager__param-error",children:S.message})]}),d.jsx("div",{className:`pageparams-manager__param-validation-icon ${f.isValid?"pageparams-manager__param-validation-icon--valid":"pageparams-manager__param-validation-icon--invalid"}`,children:f.isValid?"✓":"✗"})]}),d.jsx("div",{className:"pageparams-manager__param-controls",children:x?d.jsxs("div",{className:"pageparams-manager__param-boolean-controls",children:[d.jsxs("button",{onClick:()=>R(f.id),className:`pageparams-manager__button pageparams-manager__button--boolean-toggle ${f.value?"pageparams-manager__button--boolean-toggle--true":"pageparams-manager__button--boolean-toggle--false"}`,children:["Boolean: ",String(f.value)]}),d.jsx("button",{onClick:()=>C(f.id,"value",""),className:"pageparams-manager__button",children:"To String"})]}):d.jsxs("div",{className:"pageparams-manager__param-string-controls",children:[d.jsxs("div",{className:"pageparams-manager__param-string-input-container",children:[d.jsx("label",{className:"pageparams-manager__param-label",children:"Value:"}),d.jsx("input",{value:String(f.value),onChange:N=>C(f.id,"value",N.target.value),onBlur:y,onKeyDown:w,placeholder:"value",className:"pageparams-manager__param-input pageparams-manager__param-input--valid"})]}),d.jsx("button",{onClick:()=>C(f.id,"value",!0),className:"pageparams-manager__button pageparams-manager__button--to-boolean",children:"To Boolean"}),d.jsx("button",{onClick:()=>v(f.id),className:"pageparams-manager__button pageparams-manager__button--remove",children:"Remove"})]})})]},f.id)})}),d.jsx("button",{onClick:b,className:"pageparams-manager__add-button",children:"Add Parameter"}),d.jsxs("div",{className:"pageparams-manager__examples",children:[d.jsxs("div",{children:[d.jsx("strong",{children:"Valid names:"})," filter, user_id, Tab1, debug, user_name, filter_type, user.id, filter-type"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Invalid names:"})," -param, .config, @user, user@domain, 123-param"]})]})]})}class st extends K.Component{render(){const{isVisible:n,layoutId:e,modules:r,xRayEnabled:a,isActiveInstance:s,totalInstances:o,onClose:l,onToggleXRay:i}=this.props;if(!n)return null;const c=Object.keys(r),h=c.reduce((p,m)=>p+r[m].length,0);return d.jsx("div",{className:"page-layout-options-overlay",children:d.jsxs("div",{className:"page-layout-options-dialog",children:[d.jsxs("div",{className:"page-layout-options-header",children:[d.jsx("h2",{children:"PageLayout Options"}),d.jsx("button",{className:"page-layout-options-close",onClick:l,"aria-label":"Close",children:"×"})]}),d.jsxs("div",{className:"page-layout-options-content",children:[d.jsxs("section",{className:"page-layout-info",children:[d.jsx("h3",{children:"Layout Information"}),d.jsxs("div",{className:"info-grid",children:[d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Layout ID:"}),d.jsx("span",{children:e})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Module Slots:"}),d.jsx("span",{children:c.length})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Total Modules:"}),d.jsx("span",{children:h})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Instance Status:"}),d.jsx("span",{children:s?"Active":"Inactive"})]})]}),d.jsxs("div",{className:"module-details",children:[d.jsx("h4",{children:"Module Slots Details:"}),d.jsx("ul",{children:c.map(p=>d.jsxs("li",{children:[d.jsxs("strong",{children:[p,":"]})," ",r[p].length," module(s)"]},p))})]}),o>1&&d.jsxs("div",{className:"warning-message",children:["⚠️ Warning: ",o," PageLayout instances detected. Only the active instance responds to keyboard shortcuts."]})]}),d.jsxs("section",{className:"page-layout-controls",children:[d.jsx("h3",{children:"Debug Options"}),d.jsxs("div",{className:"control-item",children:[d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:a,onChange:i,disabled:!s}),"Enable X-Ray Mode"]}),d.jsxs("p",{className:"control-description",children:["Shows visual borders around layout components for debugging",!s&&" (Disabled - not active instance)"]})]})]}),d.jsx("section",{className:"page-layout-pageparams",children:d.jsx(Jt,{})})]}),d.jsxs("div",{className:"page-layout-options-footer",children:[d.jsxs("p",{children:["Press ",d.jsx("kbd",{children:"Option+O"}),"/",d.jsx("kbd",{children:"Win+O"})," to toggle this dialog, ",d.jsx("kbd",{children:"Esc"})," to close, or ",d.jsx("kbd",{children:"Option+X"}),"/",d.jsx("kbd",{children:"Win+X"})," to toggle X-Ray mode"]}),!s&&d.jsx("p",{className:"inactive-warning",children:"This instance is inactive and won't respond to keyboard shortcuts."})]})]})})}}var ne,Bt=new Uint8Array(16);function ot(){if(!ne&&(ne=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ne))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ne(Bt)}const Ht=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function le(t){return typeof t=="string"&&Ht.test(t)}var j=[];for(var ve=0;ve<256;++ve)j.push((ve+256).toString(16).substr(1));function ce(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(j[t[n+0]]+j[t[n+1]]+j[t[n+2]]+j[t[n+3]]+"-"+j[t[n+4]]+j[t[n+5]]+"-"+j[t[n+6]]+j[t[n+7]]+"-"+j[t[n+8]]+j[t[n+9]]+"-"+j[t[n+10]]+j[t[n+11]]+j[t[n+12]]+j[t[n+13]]+j[t[n+14]]+j[t[n+15]]).toLowerCase();if(!le(e))throw TypeError("Stringified UUID is invalid");return e}var ze,ye,be=0,we=0;function Kt(t,n,e){var r=n&&e||0,a=n||new Array(16);t=t||{};var s=t.node||ze,o=t.clockseq!==void 0?t.clockseq:ye;if(s==null||o==null){var l=t.random||(t.rng||ot)();s==null&&(s=ze=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),o==null&&(o=ye=(l[6]<<8|l[7])&16383)}var i=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:we+1,h=i-be+(c-we)/1e4;if(h<0&&t.clockseq===void 0&&(o=o+1&16383),(h<0||i>be)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");be=i,we=c,ye=o,i+=122192928e5;var p=((i&268435455)*1e4+c)%4294967296;a[r++]=p>>>24&255,a[r++]=p>>>16&255,a[r++]=p>>>8&255,a[r++]=p&255;var m=i/4294967296*1e4&268435455;a[r++]=m>>>8&255,a[r++]=m&255,a[r++]=m>>>24&15|16,a[r++]=m>>>16&255,a[r++]=o>>>8|128,a[r++]=o&255;for(var g=0;g<6;++g)a[r+g]=s[g];return n||ce(a)}function it(t){if(!le(t))throw TypeError("Invalid UUID");var n,e=new Uint8Array(16);return e[0]=(n=parseInt(t.slice(0,8),16))>>>24,e[1]=n>>>16&255,e[2]=n>>>8&255,e[3]=n&255,e[4]=(n=parseInt(t.slice(9,13),16))>>>8,e[5]=n&255,e[6]=(n=parseInt(t.slice(14,18),16))>>>8,e[7]=n&255,e[8]=(n=parseInt(t.slice(19,23),16))>>>8,e[9]=n&255,e[10]=(n=parseInt(t.slice(24,36),16))/1099511627776&255,e[11]=n/4294967296&255,e[12]=n>>>24&255,e[13]=n>>>16&255,e[14]=n>>>8&255,e[15]=n&255,e}function Xt(t){t=unescape(encodeURIComponent(t));for(var n=[],e=0;e<t.length;++e)n.push(t.charCodeAt(e));return n}var Qt="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Yt="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function lt(t,n,e){function r(a,s,o,l){if(typeof a=="string"&&(a=Xt(a)),typeof s=="string"&&(s=it(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+a.length);if(i.set(s),i.set(a,s.length),i=e(i),i[6]=i[6]&15|n,i[8]=i[8]&63|128,o){l=l||0;for(var c=0;c<16;++c)o[l+c]=i[c];return o}return ce(i)}try{r.name=t}catch{}return r.DNS=Qt,r.URL=Yt,r}function Gt(t){if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(var e=0;e<n.length;++e)t[e]=n.charCodeAt(e)}return Zt(en(tn(t),t.length*8))}function Zt(t){for(var n=[],e=t.length*32,r="0123456789abcdef",a=0;a<e;a+=8){var s=t[a>>5]>>>a%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);n.push(o)}return n}function ct(t){return(t+64>>>9<<4)+14+1}function en(t,n){t[n>>5]|=128<<n%32,t[ct(n)-1]=n;for(var e=1732584193,r=-271733879,a=-1732584194,s=271733878,o=0;o<t.length;o+=16){var l=e,i=r,c=a,h=s;e=k(e,r,a,s,t[o],7,-680876936),s=k(s,e,r,a,t[o+1],12,-389564586),a=k(a,s,e,r,t[o+2],17,606105819),r=k(r,a,s,e,t[o+3],22,-1044525330),e=k(e,r,a,s,t[o+4],7,-176418897),s=k(s,e,r,a,t[o+5],12,1200080426),a=k(a,s,e,r,t[o+6],17,-1473231341),r=k(r,a,s,e,t[o+7],22,-45705983),e=k(e,r,a,s,t[o+8],7,1770035416),s=k(s,e,r,a,t[o+9],12,-1958414417),a=k(a,s,e,r,t[o+10],17,-42063),r=k(r,a,s,e,t[o+11],22,-1990404162),e=k(e,r,a,s,t[o+12],7,1804603682),s=k(s,e,r,a,t[o+13],12,-40341101),a=k(a,s,e,r,t[o+14],17,-1502002290),r=k(r,a,s,e,t[o+15],22,1236535329),e=A(e,r,a,s,t[o+1],5,-165796510),s=A(s,e,r,a,t[o+6],9,-1069501632),a=A(a,s,e,r,t[o+11],14,643717713),r=A(r,a,s,e,t[o],20,-373897302),e=A(e,r,a,s,t[o+5],5,-701558691),s=A(s,e,r,a,t[o+10],9,38016083),a=A(a,s,e,r,t[o+15],14,-660478335),r=A(r,a,s,e,t[o+4],20,-405537848),e=A(e,r,a,s,t[o+9],5,568446438),s=A(s,e,r,a,t[o+14],9,-1019803690),a=A(a,s,e,r,t[o+3],14,-187363961),r=A(r,a,s,e,t[o+8],20,1163531501),e=A(e,r,a,s,t[o+13],5,-1444681467),s=A(s,e,r,a,t[o+2],9,-51403784),a=A(a,s,e,r,t[o+7],14,1735328473),r=A(r,a,s,e,t[o+12],20,-1926607734),e=P(e,r,a,s,t[o+5],4,-378558),s=P(s,e,r,a,t[o+8],11,-2022574463),a=P(a,s,e,r,t[o+11],16,1839030562),r=P(r,a,s,e,t[o+14],23,-35309556),e=P(e,r,a,s,t[o+1],4,-1530992060),s=P(s,e,r,a,t[o+4],11,1272893353),a=P(a,s,e,r,t[o+7],16,-155497632),r=P(r,a,s,e,t[o+10],23,-1094730640),e=P(e,r,a,s,t[o+13],4,681279174),s=P(s,e,r,a,t[o],11,-358537222),a=P(a,s,e,r,t[o+3],16,-722521979),r=P(r,a,s,e,t[o+6],23,76029189),e=P(e,r,a,s,t[o+9],4,-640364487),s=P(s,e,r,a,t[o+12],11,-421815835),a=P(a,s,e,r,t[o+15],16,530742520),r=P(r,a,s,e,t[o+2],23,-995338651),e=O(e,r,a,s,t[o],6,-198630844),s=O(s,e,r,a,t[o+7],10,1126891415),a=O(a,s,e,r,t[o+14],15,-1416354905),r=O(r,a,s,e,t[o+5],21,-57434055),e=O(e,r,a,s,t[o+12],6,1700485571),s=O(s,e,r,a,t[o+3],10,-1894986606),a=O(a,s,e,r,t[o+10],15,-1051523),r=O(r,a,s,e,t[o+1],21,-2054922799),e=O(e,r,a,s,t[o+8],6,1873313359),s=O(s,e,r,a,t[o+15],10,-30611744),a=O(a,s,e,r,t[o+6],15,-1560198380),r=O(r,a,s,e,t[o+13],21,1309151649),e=O(e,r,a,s,t[o+4],6,-145523070),s=O(s,e,r,a,t[o+11],10,-1120210379),a=O(a,s,e,r,t[o+2],15,718787259),r=O(r,a,s,e,t[o+9],21,-343485551),e=z(e,l),r=z(r,i),a=z(a,c),s=z(s,h)}return[e,r,a,s]}function tn(t){if(t.length===0)return[];for(var n=t.length*8,e=new Uint32Array(ct(n)),r=0;r<n;r+=8)e[r>>5]|=(t[r/8]&255)<<r%32;return e}function z(t,n){var e=(t&65535)+(n&65535),r=(t>>16)+(n>>16)+(e>>16);return r<<16|e&65535}function nn(t,n){return t<<n|t>>>32-n}function ue(t,n,e,r,a,s){return z(nn(z(z(n,t),z(r,s)),a),e)}function k(t,n,e,r,a,s,o){return ue(n&e|~n&r,t,n,a,s,o)}function A(t,n,e,r,a,s,o){return ue(n&r|e&~r,t,n,a,s,o)}function P(t,n,e,r,a,s,o){return ue(n^e^r,t,n,a,s,o)}function O(t,n,e,r,a,s,o){return ue(e^(n|~r),t,n,a,s,o)}var rn=lt("v3",48,Gt);function an(t,n,e){t=t||{};var r=t.random||(t.rng||ot)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,n){e=e||0;for(var a=0;a<16;++a)n[e+a]=r[a];return n}return ce(r)}function sn(t,n,e,r){switch(t){case 0:return n&e^~n&r;case 1:return n^e^r;case 2:return n&e^n&r^e&r;case 3:return n^e^r}}function Se(t,n){return t<<n|t>>>32-n}function on(t){var n=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var a=0;a<r.length;++a)t.push(r.charCodeAt(a))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),l=new Array(o),i=0;i<o;++i){for(var c=new Uint32Array(16),h=0;h<16;++h)c[h]=t[i*64+h*4]<<24|t[i*64+h*4+1]<<16|t[i*64+h*4+2]<<8|t[i*64+h*4+3];l[i]=c}l[o-1][14]=(t.length-1)*8/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=(t.length-1)*8&4294967295;for(var p=0;p<o;++p){for(var m=new Uint32Array(80),g=0;g<16;++g)m[g]=l[p][g];for(var b=16;b<80;++b)m[b]=Se(m[b-3]^m[b-8]^m[b-14]^m[b-16],1);for(var C=e[0],y=e[1],w=e[2],v=e[3],R=e[4],$=0;$<80;++$){var L=Math.floor($/20),f=Se(C,5)+sn(L,y,w,v)+R+n[L]+m[$]>>>0;R=v,v=w,w=Se(y,30)>>>0,y=C,C=f}e[0]=e[0]+C>>>0,e[1]=e[1]+y>>>0,e[2]=e[2]+w>>>0,e[3]=e[3]+v>>>0,e[4]=e[4]+R>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var ln=lt("v5",80,on);const cn="00000000-0000-0000-0000-000000000000";function un(t){if(!le(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const hn=Object.freeze(Object.defineProperty({__proto__:null,NIL:cn,parse:it,stringify:ce,v1:Kt,v3:rn,v4:an,v5:ln,validate:le,version:un},Symbol.toStringTag,{value:"Module"})),dn=Pt(hn);function Pe(t,n){if(!t||!n||!t.length||!n.length)throw new Error("Bad alphabet");this.srcAlphabet=t,this.dstAlphabet=n}Pe.prototype.convert=function(t){var n,e,r,a={},s=this.srcAlphabet.length,o=this.dstAlphabet.length,l=t.length,i=typeof t=="string"?"":[];if(!this.isValid(t))throw new Error('Number "'+t+'" contains of non-alphabetic digits ('+this.srcAlphabet+")");if(this.srcAlphabet===this.dstAlphabet)return t;for(n=0;n<l;n++)a[n]=this.srcAlphabet.indexOf(t[n]);do{for(e=0,r=0,n=0;n<l;n++)e=e*s+a[n],e>=o?(a[r++]=parseInt(e/o,10),e=e%o):r>0&&(a[r++]=0);l=r,i=this.dstAlphabet.slice(e,e+1).concat(i)}while(r!==0);return i};Pe.prototype.isValid=function(t){for(var n=0;n<t.length;++n)if(this.srcAlphabet.indexOf(t[n])===-1)return!1;return!0};var pn=Pe,mn=pn;function Z(t,n){var e=new mn(t,n);return function(r){return e.convert(r)}}Z.BIN="01";Z.OCT="01234567";Z.DEC="0123456789";Z.HEX="0123456789abcdef";var fn=Z;const{v4:xe}=dn,re=fn,Ce="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",gn="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&'()*+-./:<=>?@[]^_`{|}~",vn={consistentLength:!0};let Ee;const Je=(t,n,e)=>{const r=n(t.toLowerCase().replace(/-/g,""));return!e||!e.consistentLength?r:r.padStart(e.shortIdLength,e.paddingChar)},yn=(t,n)=>{const e=n(t).padStart(32,"0").match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/);return[e[1],e[2],e[3],e[4],e[5]].join("-")},bn=t=>Math.ceil(Math.log(2**128)/Math.log(t));var wn=(()=>{const t=(n,e)=>{const r=n||Ce,a={...vn,...e};if([...new Set(Array.from(r))].length!==r.length)throw new Error("The provided Alphabet has duplicate characters resulting in unreliable results");const s=bn(r.length),o={shortIdLength:s,consistentLength:a.consistentLength,paddingChar:r[0]},l=re(re.HEX,r),i=re(r,re.HEX),c=()=>Je(xe(),l,o),h={new:c,generate:c,uuid:xe,fromUUID:p=>Je(p,l,o),toUUID:p=>yn(p,i),alphabet:r,maxLength:s};return Object.freeze(h),h};return t.constants={flickrBase58:Ce,cookieBase90:gn},t.uuid=xe,t.generate=()=>(Ee||(Ee=t(Ce).generate),Ee()),t})();const ut=u.createContext(null),Sn=u.createContext(null);var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.parse=jn;Oe.serialize=kn;const xn=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Cn=/^[\u0021-\u003A\u003C-\u007E]*$/,En=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Rn=/^[\u0020-\u003A\u003D-\u007E]*$/,$n=Object.prototype.toString,Nn=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function jn(t,n){const e=new Nn,r=t.length;if(r<2)return e;const a=(n==null?void 0:n.decode)||An;let s=0;do{const o=t.indexOf("=",s);if(o===-1)break;const l=t.indexOf(";",s),i=l===-1?r:l;if(o>i){s=t.lastIndexOf(";",o-1)+1;continue}const c=Be(t,s,o),h=He(t,o,c),p=t.slice(c,h);if(e[p]===void 0){let m=Be(t,o+1,i),g=He(t,i,m);const b=a(t.slice(m,g));e[p]=b}s=i+1}while(s<r);return e}function Be(t,n,e){do{const r=t.charCodeAt(n);if(r!==32&&r!==9)return n}while(++n<e);return e}function He(t,n,e){for(;n>e;){const r=t.charCodeAt(--n);if(r!==32&&r!==9)return n+1}return e}function kn(t,n,e){const r=(e==null?void 0:e.encode)||encodeURIComponent;if(!xn.test(t))throw new TypeError(`argument name is invalid: ${t}`);const a=r(n);if(!Cn.test(a))throw new TypeError(`argument val is invalid: ${n}`);let s=t+"="+a;if(!e)return s;if(e.maxAge!==void 0){if(!Number.isInteger(e.maxAge))throw new TypeError(`option maxAge is invalid: ${e.maxAge}`);s+="; Max-Age="+e.maxAge}if(e.domain){if(!En.test(e.domain))throw new TypeError(`option domain is invalid: ${e.domain}`);s+="; Domain="+e.domain}if(e.path){if(!Rn.test(e.path))throw new TypeError(`option path is invalid: ${e.path}`);s+="; Path="+e.path}if(e.expires){if(!Pn(e.expires)||!Number.isFinite(e.expires.valueOf()))throw new TypeError(`option expires is invalid: ${e.expires}`);s+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(s+="; HttpOnly"),e.secure&&(s+="; Secure"),e.partitioned&&(s+="; Partitioned"),e.priority)switch(typeof e.priority=="string"?e.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${e.priority}`)}if(e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${e.sameSite}`)}return s}function An(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function Pn(t){return $n.call(t)==="[object Date]"}function E(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function D(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Ne({pathname:t="/",search:n="",hash:e=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function he(t){let n={};if(t){let e=t.indexOf("#");e>=0&&(n.hash=t.substring(e),t=t.substring(0,e));let r=t.indexOf("?");r>=0&&(n.search=t.substring(r),t=t.substring(0,r)),t&&(n.pathname=t)}return n}function ht(t,n,e="/"){return On(t,n,e,!1)}function On(t,n,e,r){let a=typeof n=="string"?he(n):n,s=J(a.pathname||"/",e);if(s==null)return null;let o=dt(t);_n(o);let l=null;for(let i=0;l==null&&i<o.length;++i){let c=zn(s);l=Vn(o[i],c,r)}return l}function dt(t,n=[],e=[],r=""){let a=(s,o,l)=>{let i={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};i.relativePath.startsWith("/")&&(E(i.relativePath.startsWith(r),`Absolute route path "${i.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),i.relativePath=i.relativePath.slice(r.length));let c=U([r,i.relativePath]),h=e.concat(i);s.children&&s.children.length>0&&(E(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),dt(s.children,n,h,c)),!(s.path==null&&!s.index)&&n.push({path:c,score:Wn(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let i of pt(s.path))a(s,o,i)}),n}function pt(t){let n=t.split("/");if(n.length===0)return[];let[e,...r]=n,a=e.endsWith("?"),s=e.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=pt(r.join("/")),l=[];return l.push(...o.map(i=>i===""?s:[s,i].join("/"))),a&&l.push(...o),l.map(i=>t.startsWith("/")&&i===""?"/":i)}function _n(t){t.sort((n,e)=>n.score!==e.score?e.score-n.score:Fn(n.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}var In=/^:[\w-]+$/,Tn=3,Ln=2,Mn=1,Un=10,Dn=-2,Ke=t=>t==="*";function Wn(t,n){let e=t.split("/"),r=e.length;return e.some(Ke)&&(r+=Dn),n&&(r+=Ln),e.filter(a=>!Ke(a)).reduce((a,s)=>a+(In.test(s)?Tn:s===""?Mn:Un),r)}function Fn(t,n){return t.length===n.length&&t.slice(0,-1).every((e,r)=>e===n[r])?t[t.length-1]-n[n.length-1]:0}function Vn(t,n,e=!1){let{routesMeta:r}=t,a={},s="/",o=[];for(let l=0;l<r.length;++l){let i=r[l],c=l===r.length-1,h=s==="/"?n:n.slice(s.length)||"/",p=ie({path:i.relativePath,caseSensitive:i.caseSensitive,end:c},h),m=i.route;if(!p&&c&&e&&!r[r.length-1].route.index&&(p=ie({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},h)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:U([s,p.pathname]),pathnameBase:Kn(U([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=U([s,p.pathnameBase]))}return o}function ie(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,r]=qn(t.path,t.caseSensitive,t.end),a=n.match(e);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((i,{paramName:c,isOptional:h},p)=>{if(c==="*"){let g=l[p]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=l[p];return h&&!m?i[c]=void 0:i[c]=(m||"").replace(/%2F/g,"/"),i},{}),pathname:s,pathnameBase:o,pattern:t}}function qn(t,n=!1,e=!0){D(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),r]}function zn(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return D(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function J(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,r=t.charAt(e);return r&&r!=="/"?null:t.slice(e)||"/"}function Jn(t,n="/"){let{pathname:e,search:r="",hash:a=""}=typeof t=="string"?he(t):t;return{pathname:e?e.startsWith("/")?e:Bn(e,n):n,search:Xn(r),hash:Qn(a)}}function Bn(t,n){let e=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function Re(t,n,e,r){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Hn(t){return t.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function mt(t){let n=Hn(t);return n.map((e,r)=>r===n.length-1?e.pathname:e.pathnameBase)}function ft(t,n,e,r=!1){let a;typeof t=="string"?a=he(t):(a={...t},E(!a.pathname||!a.pathname.includes("?"),Re("?","pathname","search",a)),E(!a.pathname||!a.pathname.includes("#"),Re("#","pathname","hash",a)),E(!a.search||!a.search.includes("#"),Re("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=e;else{let p=n.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;a.pathname=m.join("/")}l=p>=0?n[p]:"/"}let i=Jn(a,l),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&e.endsWith("/");return!i.pathname.endsWith("/")&&(c||h)&&(i.pathname+="/"),i}var U=t=>t.join("/").replace(/\/\/+/g,"/"),Kn=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Xn=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Qn=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Yn(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var gt=["POST","PUT","PATCH","DELETE"];new Set(gt);var Gn=["GET",...gt];new Set(Gn);var X=u.createContext(null);X.displayName="DataRouter";var de=u.createContext(null);de.displayName="DataRouterState";var vt=u.createContext({isTransitioning:!1});vt.displayName="ViewTransition";var Zn=u.createContext(new Map);Zn.displayName="Fetchers";var er=u.createContext(null);er.displayName="Await";var W=u.createContext(null);W.displayName="Navigation";var pe=u.createContext(null);pe.displayName="Location";var F=u.createContext({outlet:null,matches:[],isDataRoute:!1});F.displayName="Route";var _e=u.createContext(null);_e.displayName="RouteError";function tr(t,{relative:n}={}){E(me(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:r}=u.useContext(W),{hash:a,pathname:s,search:o}=ee(t,{relative:n}),l=s;return e!=="/"&&(l=s==="/"?e:U([e,s])),r.createHref({pathname:l,search:o,hash:a})}function me(){return u.useContext(pe)!=null}function H(){return E(me(),"useLocation() may be used only in the context of a <Router> component."),u.useContext(pe).location}var yt="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bt(t){u.useContext(W).static||u.useLayoutEffect(t)}function nr(){let{isDataRoute:t}=u.useContext(F);return t?fr():rr()}function rr(){E(me(),"useNavigate() may be used only in the context of a <Router> component.");let t=u.useContext(X),{basename:n,navigator:e}=u.useContext(W),{matches:r}=u.useContext(F),{pathname:a}=H(),s=JSON.stringify(mt(r)),o=u.useRef(!1);return bt(()=>{o.current=!0}),u.useCallback((l,i={})=>{if(D(o.current,yt),!o.current)return;if(typeof l=="number"){e.go(l);return}let c=ft(l,JSON.parse(s),a,i.relative==="path");t==null&&n!=="/"&&(c.pathname=c.pathname==="/"?n:U([n,c.pathname])),(i.replace?e.replace:e.push)(c,i.state,i)},[n,e,s,a,t])}u.createContext(null);function ee(t,{relative:n}={}){let{matches:e}=u.useContext(F),{pathname:r}=H(),a=JSON.stringify(mt(e));return u.useMemo(()=>ft(t,JSON.parse(a),r,n==="path"),[t,a,r,n])}function ar(t,n){return wt(t,n)}function wt(t,n,e,r){var a;E(me(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=u.useContext(W),{matches:o}=u.useContext(F),l=o[o.length-1],i=l?l.params:{},c=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let v=p&&p.path||"";St(c,!p||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let m=H(),g;if(n){let v=typeof n=="string"?he(n):n;E(h==="/"||((a=v.pathname)==null?void 0:a.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${v.pathname}" was given in the \`location\` prop.`),g=v}else g=m;let b=g.pathname||"/",C=b;if(h!=="/"){let v=h.replace(/^\//,"").split("/");C="/"+b.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=ht(t,{pathname:C});D(p||y!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),D(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=cr(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},i,v.params),pathname:U([h,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?h:U([h,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,e,r);return n&&w?u.createElement(pe.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},w):w}function sr(){let t=mr(),n=Yn(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=u.createElement(u.Fragment,null,u.createElement("p",null,"💿 Hey developer 👋"),u.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",u.createElement("code",{style:s},"ErrorBoundary")," or"," ",u.createElement("code",{style:s},"errorElement")," prop on your route.")),u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},n),e?u.createElement("pre",{style:a},e):null,o)}var or=u.createElement(sr,null),ir=class extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(F.Provider,{value:this.props.routeContext},u.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lr({routeContext:t,match:n,children:e}){let r=u.useContext(X);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(F.Provider,{value:t},e)}function cr(t,n=[],e=null,r=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(n.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let a=t,s=e==null?void 0:e.errors;if(s!=null){let i=a.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);E(i>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,i+1))}let o=!1,l=-1;if(e)for(let i=0;i<a.length;i++){let c=a[i];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=i),c.route.id){let{loaderData:h,errors:p}=e,m=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((i,c,h)=>{let p,m=!1,g=null,b=null;e&&(p=s&&c.route.id?s[c.route.id]:void 0,g=c.route.errorElement||or,o&&(l<0&&h===0?(St("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,b=null):l===h&&(m=!0,b=c.route.hydrateFallbackElement||null)));let C=n.concat(a.slice(0,h+1)),y=()=>{let w;return p?w=g:m?w=b:c.route.Component?w=u.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=i,u.createElement(lr,{match:c,routeContext:{outlet:i,matches:C,isDataRoute:e!=null},children:w})};return e&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?u.createElement(ir,{location:e.location,revalidation:e.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):y()},null)}function Ie(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ur(t){let n=u.useContext(X);return E(n,Ie(t)),n}function hr(t){let n=u.useContext(de);return E(n,Ie(t)),n}function dr(t){let n=u.useContext(F);return E(n,Ie(t)),n}function Te(t){let n=dr(t),e=n.matches[n.matches.length-1];return E(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function pr(){return Te("useRouteId")}function mr(){var t;let n=u.useContext(_e),e=hr("useRouteError"),r=Te("useRouteError");return n!==void 0?n:(t=e.errors)==null?void 0:t[r]}function fr(){let{router:t}=ur("useNavigate"),n=Te("useNavigate"),e=u.useRef(!1);return bt(()=>{e.current=!0}),u.useCallback(async(r,a={})=>{D(e.current,yt),e.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:n,...a}))},[t,n])}var Xe={};function St(t,n,e){!n&&!Xe[t]&&(Xe[t]=!0,D(!1,e))}u.memo(gr);function gr({routes:t,future:n,state:e}){return wt(t,void 0,e,n)}function vr(t){E(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xt({children:t,location:n}){return ar(je(t),n)}function je(t,n=[]){let e=[];return u.Children.forEach(t,(r,a)=>{if(!u.isValidElement(r))return;let s=[...n,a];if(r.type===u.Fragment){e.push.apply(e,je(r.props.children,s));return}E(r.type===vr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),E(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=je(r.props.children,s)),e.push(o)}),e}var se="get",oe="application/x-www-form-urlencoded";function fe(t){return t!=null&&typeof t.tagName=="string"}function yr(t){return fe(t)&&t.tagName.toLowerCase()==="button"}function br(t){return fe(t)&&t.tagName.toLowerCase()==="form"}function wr(t){return fe(t)&&t.tagName.toLowerCase()==="input"}function Sr(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xr(t,n){return t.button===0&&(!n||n==="_self")&&!Sr(t)}var ae=null;function Cr(){if(ae===null)try{new FormData(document.createElement("form"),0),ae=!1}catch{ae=!0}return ae}var Er=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $e(t){return t!=null&&!Er.has(t)?(D(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oe}"`),null):t}function Rr(t,n){let e,r,a,s,o;if(br(t)){let l=t.getAttribute("action");r=l?J(l,n):null,e=t.getAttribute("method")||se,a=$e(t.getAttribute("enctype"))||oe,s=new FormData(t)}else if(yr(t)||wr(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=t.getAttribute("formaction")||l.getAttribute("action");if(r=i?J(i,n):null,e=t.getAttribute("formmethod")||l.getAttribute("method")||se,a=$e(t.getAttribute("formenctype"))||$e(l.getAttribute("enctype"))||oe,s=new FormData(l,t),!Cr()){let{name:c,type:h,value:p}=t;if(h==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,p)}}else{if(fe(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=se,r=null,a=oe,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:r,method:e.toLowerCase(),encType:a,formData:s,body:o}}function Le(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}async function $r(t,n){if(t.id in n)return n[t.id];try{let e=await import(t.module);return n[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Nr(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function jr(t,n,e){let r=await Promise.all(t.map(async a=>{let s=n.routes[a.route.id];if(s){let o=await $r(s,e);return o.links?o.links():[]}return[]}));return Or(r.flat(1).filter(Nr).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Qe(t,n,e,r,a,s){let o=(i,c)=>e[c]?i.route.id!==e[c].route.id:!0,l=(i,c)=>{var h;return e[c].pathname!==i.pathname||((h=e[c].route.path)==null?void 0:h.endsWith("*"))&&e[c].params["*"]!==i.params["*"]};return s==="assets"?n.filter((i,c)=>o(i,c)||l(i,c)):s==="data"?n.filter((i,c)=>{var h;let p=r.routes[i.route.id];if(!p||!p.hasLoader)return!1;if(o(i,c)||l(i,c))return!0;if(i.route.shouldRevalidate){let m=i.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((h=e[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:i.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function kr(t,n,{includeHydrateFallback:e}={}){return Ar(t.map(r=>{let a=n.routes[r.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function Ar(t){return[...new Set(t)]}function Pr(t){let n={},e=Object.keys(t).sort();for(let r of e)n[r]=t[r];return n}function Or(t,n){let e=new Set;return new Set(n),t.reduce((r,a)=>{let s=JSON.stringify(Pr(a));return e.has(s)||(e.add(s),r.push({key:s,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _r=new Set([100,101,204,205]);function Ir(t,n){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":n&&J(e.pathname,n)==="/"?e.pathname=`${n.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Ct(){let t=u.useContext(X);return Le(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Tr(){let t=u.useContext(de);return Le(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Me=u.createContext(void 0);Me.displayName="FrameworkContext";function Et(){let t=u.useContext(Me);return Le(t,"You must render this element inside a <HydratedRouter> element"),t}function Lr(t,n){let e=u.useContext(Me),[r,a]=u.useState(!1),[s,o]=u.useState(!1),{onFocus:l,onBlur:i,onMouseEnter:c,onMouseLeave:h,onTouchStart:p}=n,m=u.useRef(null);u.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let C=w=>{w.forEach(v=>{o(v.isIntersecting)})},y=new IntersectionObserver(C,{threshold:.5});return m.current&&y.observe(m.current),()=>{y.disconnect()}}},[t]),u.useEffect(()=>{if(r){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[r]);let g=()=>{a(!0)},b=()=>{a(!1),o(!1)};return e?t!=="intent"?[s,m,{}]:[s,m,{onFocus:Y(l,g),onBlur:Y(i,b),onMouseEnter:Y(c,g),onMouseLeave:Y(h,b),onTouchStart:Y(p,g)}]:[!1,m,{}]}function Y(t,n){return e=>{t&&t(e),e.defaultPrevented||n(e)}}function Mr({page:t,...n}){let{router:e}=Ct(),r=u.useMemo(()=>ht(e.routes,t,e.basename),[e.routes,t,e.basename]);return r?u.createElement(Dr,{page:t,matches:r,...n}):null}function Ur(t){let{manifest:n,routeModules:e}=Et(),[r,a]=u.useState([]);return u.useEffect(()=>{let s=!1;return jr(t,n,e).then(o=>{s||a(o)}),()=>{s=!0}},[t,n,e]),r}function Dr({page:t,matches:n,...e}){let r=H(),{manifest:a,routeModules:s}=Et(),{basename:o}=Ct(),{loaderData:l,matches:i}=Tr(),c=u.useMemo(()=>Qe(t,n,i,a,r,"data"),[t,n,i,a,r]),h=u.useMemo(()=>Qe(t,n,i,a,r,"assets"),[t,n,i,a,r]),p=u.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,C=!1;if(n.forEach(w=>{var v;let R=a.routes[w.route.id];!R||!R.hasLoader||(!c.some($=>$.route.id===w.route.id)&&w.route.id in l&&(v=s[w.route.id])!=null&&v.shouldRevalidate||R.hasClientLoader?C=!0:b.add(w.route.id))}),b.size===0)return[];let y=Ir(t,o);return C&&b.size>0&&y.searchParams.set("_routes",n.filter(w=>b.has(w.route.id)).map(w=>w.route.id).join(",")),[y.pathname+y.search]},[o,l,r,a,c,n,t,s]),m=u.useMemo(()=>kr(h,a),[h,a]),g=Ur(h);return u.createElement(u.Fragment,null,p.map(b=>u.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...e})),m.map(b=>u.createElement("link",{key:b,rel:"modulepreload",href:b,...e})),g.map(({key:b,link:C})=>u.createElement("link",{key:b,...C})))}function Wr(...t){return n=>{t.forEach(e=>{typeof e=="function"?e(n):e!=null&&(e.current=n)})}}var Rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Rt&&(window.__reactRouterVersion="7.6.1")}catch{}var $t=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=u.forwardRef(function({onClick:t,discover:n="render",prefetch:e="none",relative:r,reloadDocument:a,replace:s,state:o,target:l,to:i,preventScrollReset:c,viewTransition:h,...p},m){let{basename:g}=u.useContext(W),b=typeof i=="string"&&$t.test(i),C,y=!1;if(typeof i=="string"&&b&&(C=i,Rt))try{let x=new URL(window.location.href),N=i.startsWith("//")?new URL(x.protocol+i):new URL(i),V=J(N.pathname,g);N.origin===x.origin&&V!=null?i=V+N.search+N.hash:y=!0}catch{D(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=tr(i,{relative:r}),[v,R,$]=Lr(e,p),L=zr(i,{replace:s,state:o,target:l,preventScrollReset:c,relative:r,viewTransition:h});function f(x){t&&t(x),x.defaultPrevented||L(x)}let S=u.createElement("a",{...p,...$,href:C||w,onClick:y||a?t:f,ref:Wr(m,R),target:l,"data-discover":!b&&n==="render"?"true":void 0});return v&&!b?u.createElement(u.Fragment,null,S,u.createElement(Mr,{page:w})):S});Nt.displayName="Link";var Fr=u.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:e="",end:r=!1,style:a,to:s,viewTransition:o,children:l,...i},c){let h=ee(s,{relative:i.relative}),p=H(),m=u.useContext(de),{navigator:g,basename:b}=u.useContext(W),C=m!=null&&Xr(h)&&o===!0,y=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,w=p.pathname,v=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(w=w.toLowerCase(),v=v?v.toLowerCase():null,y=y.toLowerCase()),v&&b&&(v=J(v,b)||v);const R=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let $=w===y||!r&&w.startsWith(y)&&w.charAt(R)==="/",L=v!=null&&(v===y||!r&&v.startsWith(y)&&v.charAt(y.length)==="/"),f={isActive:$,isPending:L,isTransitioning:C},S=$?t:void 0,x;typeof e=="function"?x=e(f):x=[e,$?"active":null,L?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(f):a;return u.createElement(Nt,{...i,"aria-current":S,className:x,ref:c,style:N,to:s,viewTransition:o},typeof l=="function"?l(f):l)});Fr.displayName="NavLink";var Vr=u.forwardRef(({discover:t="render",fetcherKey:n,navigate:e,reloadDocument:r,replace:a,state:s,method:o=se,action:l,onSubmit:i,relative:c,preventScrollReset:h,viewTransition:p,...m},g)=>{let b=Hr(),C=Kr(l,{relative:c}),y=o.toLowerCase()==="get"?"get":"post",w=typeof l=="string"&&$t.test(l),v=R=>{if(i&&i(R),R.defaultPrevented)return;R.preventDefault();let $=R.nativeEvent.submitter,L=($==null?void 0:$.getAttribute("formmethod"))||o;b($||R.currentTarget,{fetcherKey:n,method:L,navigate:e,replace:a,state:s,relative:c,preventScrollReset:h,viewTransition:p})};return u.createElement("form",{ref:g,method:y,action:C,onSubmit:r?i:v,...m,"data-discover":!w&&t==="render"?"true":void 0})});Vr.displayName="Form";function qr(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jt(t){let n=u.useContext(X);return E(n,qr(t)),n}function zr(t,{target:n,replace:e,state:r,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=nr(),i=H(),c=ee(t,{relative:s});return u.useCallback(h=>{if(xr(h,n)){h.preventDefault();let p=e!==void 0?e:Ne(i)===Ne(c);l(t,{replace:p,state:r,preventScrollReset:a,relative:s,viewTransition:o})}},[i,l,c,e,r,n,t,a,s,o])}var Jr=0,Br=()=>`__${String(++Jr)}__`;function Hr(){let{router:t}=jt("useSubmit"),{basename:n}=u.useContext(W),e=pr();return u.useCallback(async(r,a={})=>{let{action:s,method:o,encType:l,formData:i,body:c}=Rr(r,n);if(a.navigate===!1){let h=a.fetcherKey||Br();await t.fetch(h,e,a.action||s,{preventScrollReset:a.preventScrollReset,formData:i,body:c,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:i,body:c,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,n,e])}function Kr(t,{relative:n}={}){let{basename:e}=u.useContext(W),r=u.useContext(F);E(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),s={...ee(t||".",{relative:n})},o=H();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),i=l.getAll("index");if(i.some(c=>c==="")){l.delete("index"),i.filter(h=>h).forEach(h=>l.append("index",h));let c=l.toString();s.search=c?`?${c}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(s.pathname=s.pathname==="/"?e:U([e,s.pathname])),Ne(s)}function Xr(t,n={}){let e=u.useContext(vt);E(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=jt("useViewTransitionState"),a=ee(t,{relative:n.relative});if(!e.isTransitioning)return!1;let s=J(e.currentLocation.pathname,r)||e.currentLocation.pathname,o=J(e.nextLocation.pathname,r)||e.nextLocation.pathname;return ie(a.pathname,o)!=null||ie(a.pathname,s)!=null}[..._r];const kt=class extends K.Component{constructor(n){super(n),this.unsubscribe=null,this.mounted=!1,this.slotContextRef=K.createRef(),this.moduleId=wn.generate(),this.moduleName=this.constructor.name,this.state={pageState:T.get(),initialized:!1}}componentDidMount(){if(this.mounted=!0,!this.context){console.error("PageModule must be rendered within a PageLayout");return}const{data:n={}}=this.props;this.unsubscribe=T.subscribe(e=>{this.mounted&&this.shouldUpdate(e)&&this.setState({pageState:e})}),G(e=>({...e,moduleState:{...e.moduleState,[this.moduleId]:{component:this.moduleId,...n}}})),this.setState({initialized:!0})}shouldUpdate(n){const e=this.state.pageState;return e.pageName!==n.pageName||JSON.stringify(e.pageParams)!==JSON.stringify(n.pageParams)||JSON.stringify(e.linkParams)!==JSON.stringify(n.linkParams)||e.breadcrumbs!==n.breadcrumbs||JSON.stringify(e.globalState)!==JSON.stringify(n.globalState)||JSON.stringify(e.moduleState)!==JSON.stringify(n.moduleState)||JSON.stringify(e.auth)!==JSON.stringify(n.auth)}componentWillUnmount(){this.mounted=!1,this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),this.context&&G(n=>{const{[this.moduleId]:e,...r}=n.moduleState;return{...n,moduleState:r}})}get pageState(){return this.state.pageState}get moduleState(){return this.state.pageState.moduleState[this.moduleId]||{}}get slotContext(){return this.slotContextRef.current}render(){return this.context?this.state.initialized?d.jsx(Sn.Consumer,{children:n=>(this.slotContextRef.current=n,n?this.renderContent():d.jsx("div",{className:"page-module page-module--error",children:"ERROR: PageModule must be rendered within a PageSlot"}))}):d.jsx("div",{className:"page-module page-module--loading",children:"Loading..."}):d.jsxs("div",{className:"page-module page-module--error",children:["ERROR: PageModule must be rendered within a PageLayout:"," ",this.moduleName]})}renderContent(){return this.props.children}};kt.contextType=ut;let ke=kt;class Qr extends ke{render(){return d.jsx(xt,{children:this.props.children})}}const Ye=class _ extends K.Component{constructor(n){super(n),this.handleKeyDown=e=>{if(_.activeInstance===this){if(e.altKey&&e.code==="KeyO"){e.preventDefault(),this.setState({showOptions:!this.state.showOptions});return}if(e.key==="Escape"&&this.state.showOptions){e.preventDefault(),this.setState({showOptions:!1});return}if(e.altKey&&e.code==="KeyX"){e.preventDefault(),this.toggleXRay();return}}},this.toggleXRay=()=>{Ve(!Fe()),this.forceUpdate()},this.closeOptions=()=>{this.setState({showOptions:!1})},this.layoutId=this.constructor.name,this.state={showOptions:!1,pageState:T.get()}}gatherModulesFromChildren(){const n={};return K.Children.forEach(this.props.children,e=>{var r,a;if(!K.isValidElement(e)){console.warn("[PageLayout] Invalid child element found, skipping:",e);return}const s=e.type;if(!(s&&(s.prototype instanceof ke||s===ke||s.prototype&&((r=s.prototype.constructor)==null?void 0:r.name)==="PageModule")))throw new Error(`[PageLayout] All children must be PageModule instances. Found: ${(s==null?void 0:s.name)||"Unknown"}. Please ensure all children extend PageModule and have a slotName prop.`);let o=(a=e.props)==null?void 0:a.slotName;(!o||typeof o!="string")&&(o="main",console.log(`[PageLayout] PageModule child missing slotName prop, defaulting to "main". Component: ${(s==null?void 0:s.name)||"Unknown"}`)),n[o]||(n[o]=[]),n[o].push(e)}),n}get modules(){return this.gatherModulesFromChildren()}componentDidMount(){_.instanceCount++,_.activeInstance&&_.activeInstance!==this&&(console.warn("[PageLayout] Multiple PageLayout instances detected. Only one PageLayout should be active at a time.",`Current: ${this.layoutId}, Previous: ${_.activeInstance.layoutId}`),_.activeInstance.forceCleanup()),_.activeInstance=this,this.unsubscribePageStore=T.subscribe(n=>{this.setState({pageState:n})}),this.props.xRay!==void 0&&Ve(this.props.xRay),this.props.title&&qe(this.props.title);try{this.gatherModulesFromChildren()}catch(n){throw console.error("[PageLayout] Validation failed:",n),n}this.setupEventListeners(),this.onMount()}componentDidUpdate(n){n.title!==this.props.title&&this.props.title&&qe(this.props.title)}componentWillUnmount(){_.instanceCount--,this.unsubscribePageStore&&this.unsubscribePageStore(),_.activeInstance===this&&(this.cleanupEventListeners(),_.activeInstance=null),this.onUnmount()}setupEventListeners(){document.addEventListener("keydown",this.handleKeyDown)}cleanupEventListeners(){document.removeEventListener("keydown",this.handleKeyDown)}forceCleanup(){this.cleanupEventListeners(),this.state.showOptions&&this.setState({showOptions:!1})}static getActiveInstanceInfo(){var n;return{activeInstance:((n=_.activeInstance)==null?void 0:n.layoutId)||null,totalInstances:_.instanceCount}}onMount(){}onUnmount(){}render(){const n=Fe(),{breadcrumbs:e}=this.state.pageState,r={layoutId:this.layoutId,pageModules:this.modules,xRay:n,addPageModule:(s,o)=>{console.warn("[PageLayout] addPageModule not yet implemented")},removePageModule:(s,o)=>{console.warn("[PageLayout] removePageModule not yet implemented")}},a=n?"page-layout x-ray":"page-layout";return d.jsxs(ut.Provider,{value:r,children:[d.jsx("div",{id:this.layoutId,className:a,children:this.renderContent()}),d.jsx(st,{isVisible:this.state.showOptions&&_.activeInstance===this,layoutId:this.layoutId,modules:this.modules,xRayEnabled:n,isActiveInstance:_.activeInstance===this,totalInstances:_.instanceCount,onClose:this.closeOptions,onToggleXRay:this.toggleXRay})]})}};Ye.activeInstance=null,Ye.instanceCount=0;class B extends Error{constructor(n,e,r){super(n),this.status=e,this.response=r,this.name="ApiError"}}class I extends Error{constructor(n){super(n),this.name="ConfigurationError"}}class Yr{constructor(n,e,r){this.config=n,this.baseUrl=e,this.params=r,this.eventSource=null,this.subscriptions=new Map,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3}async connect(){return new Promise((n,e)=>{try{const r=this.resolveUri();this.eventSource=new EventSource(r),this.eventSource.onopen=()=>{console.log(`📡 SSE connected: ${r}`),this.reconnectAttempts=0,n()},this.eventSource.onmessage=a=>{this.handleMessage(a)},this.eventSource.onerror=a=>{var s;console.error("📡 SSE error:",a),((s=this.eventSource)==null?void 0:s.readyState)===EventSource.CLOSED?this.handleReconnect():e(a)}}catch(r){e(r)}})}disconnect(){this.eventSource&&(this.eventSource.close(),this.eventSource=null),this.subscriptions.clear()}subscribe(n,e){return this.subscriptions.has(n)||this.subscriptions.set(n,new Set),this.subscriptions.get(n).add(e),this.isConnected()&&this.addChannelListener(n),()=>{const r=this.subscriptions.get(n);r&&(r.delete(e),r.size===0&&(this.subscriptions.delete(n),this.removeChannelListener(n)))}}publish(n,e){throw new Error("SSE does not support publishing. Use a separate HTTP request for sending data to server.")}isConnected(){var n;return((n=this.eventSource)==null?void 0:n.readyState)===EventSource.OPEN}resolveUri(){return typeof this.config.uri=="string"?this.baseUrl+this.config.uri:this.config.uri(this.params)}handleMessage(n){try{const e=JSON.parse(n.data),{channel:r,message:a}=e;if(!r){this.notifySubscribers("default",e);return}this.subscriptions.has(r)&&this.notifySubscribers(r,a)}catch{this.notifySubscribers("default",n.data)}}addChannelListener(n){this.eventSource&&n!=="default"&&this.eventSource.addEventListener(n,e=>{try{const r=JSON.parse(e.data);this.notifySubscribers(n,r)}catch{this.notifySubscribers(n,e.data)}})}removeChannelListener(n){}notifySubscribers(n,e){const r=this.subscriptions.get(n);r&&r.forEach(a=>{try{a(e)}catch(s){console.error(`📡 Error in SSE handler for channel ${n}:`,s)}})}handleReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const n=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`📡 Attempting to reconnect SSE in ${n}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>{this.connect().catch(e=>{console.error("📡 SSE reconnection failed:",e)})},n)}else console.error("📡 SSE max reconnection attempts reached")}}class Gr{constructor(n,e,r){this.config=n,this.baseUrl=e,this.params=r,this.ws=null,this.subscriptions=new Map,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3}async connect(){return new Promise((n,e)=>{try{const r=this.resolveUri(),a=this.resolveHeaders(),s=r.replace(/^https?:/,r.startsWith("https:")?"wss:":"ws:");this.ws=new WebSocket(s),this.ws.onopen=()=>{console.log(`🔌 WebSocket connected: ${s}`),this.reconnectAttempts=0,n()},this.ws.onmessage=o=>{this.handleMessage(o)},this.ws.onclose=()=>{console.log("🔌 WebSocket disconnected"),this.handleReconnect()},this.ws.onerror=o=>{console.error("🔌 WebSocket error:",o),e(o)}}catch(r){e(r)}})}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.subscriptions.clear()}subscribe(n,e){const r=n||"default";return this.subscriptions.has(r)||this.subscriptions.set(r,new Set),this.subscriptions.get(r).add(e),this.isConnected()&&this.sendSubscriptionMessage(r,"subscribe"),()=>{const a=this.subscriptions.get(r);a&&(a.delete(e),a.size===0&&(this.subscriptions.delete(r),this.isConnected()&&this.sendSubscriptionMessage(r,"unsubscribe")))}}send(n,e){if(!this.isConnected())throw new Error("WebSocket not connected");const r={type:"publish",channel:e||"default",message:n};this.ws.send(JSON.stringify(r))}publish(n,e){this.send(e,n)}isConnected(){var n;return((n=this.ws)==null?void 0:n.readyState)===WebSocket.OPEN}resolveUri(){return typeof this.config.uri=="string"?this.baseUrl+this.config.uri:this.config.uri(this.params)}resolveHeaders(){return this.config.headers?typeof this.config.headers=="function"?this.config.headers(this.params,{}):this.config.headers:{}}handleMessage(n){try{const e=JSON.parse(n.data),{channel:r,message:a}=e;r&&this.subscriptions.has(r)&&this.subscriptions.get(r).forEach(s=>{try{s(a)}catch(o){console.error(`🔌 Error in subscription handler for channel ${r}:`,o)}})}catch(e){console.error("🔌 Error parsing WebSocket message:",e)}}sendSubscriptionMessage(n,e){const r={type:e,channel:n};this.ws.send(JSON.stringify(r))}handleReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const n=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`🔌 Attempting to reconnect WebSocket in ${n}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>{this.connect().catch(e=>{console.error("🔌 WebSocket reconnection failed:",e)})},n)}else console.error("🔌 WebSocket max reconnection attempts reached")}}class Zr{static create(n,e,r){switch(n.transport){case"websockets":return new Gr(n,e,r);case"sse":return new Yr(n,e,r);case"mqtt":throw new I("MQTT transport not yet implemented");case"webrtc":throw new I("WebRTC transport not yet implemented");default:throw new I(`Unsupported RTC transport: ${n.transport}`)}}}class ea{constructor(n){this.rtcConnections=new Map,this.metadataCache=new Map,this.config=this.validateConfig(n),this.debug=n.debug??!1}async send(n,e,r){const a=this.getCommandConfig(n),s=this.resolveUri(a.uri,r),o=this.resolveHeaders(a.headers,r),l=this.resolveData(a.data,e);try{const i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...o},body:l?JSON.stringify(l):void 0});return await this.createResponse(i,a.response)}catch(i){throw new B(`Command '${n}' failed: ${i}`,void 0,i)}}async query(n,e){const r=this.getQueryConfig(n),a=this.resolveUri(r.uri,e),s=this.resolveHeaders(r.headers,e);try{const o=await fetch(a,{method:"GET",headers:s});return await this.createResponse(o,r.response)}catch(o){throw new B(`Query '${n}' failed: ${o}`,void 0,o)}}async getQueryMetadata(n,e){const r=this.getQueryConfig(n);if(!r.meta)throw new I(`Query '${n}' has no metadata configuration`);const a=this.resolveUri(r.meta,e),s=this.resolveHeaders(r.headers,e);try{const o=await fetch(a,{method:"GET",headers:s});return await this.createResponse(o,r.response)}catch(o){throw new B(`Query metadata '${n}' failed: ${o}`,void 0,o)}}async queryMeta(n,e){const r=this.getQueryConfig(n);if(!r.meta)throw new I(`Query '${n}' has no metadata configuration`);const a=this.resolveUri(r.meta,e),s=this.resolveHeaders(r.headers,e),o=this.generateMetadataCacheKey(a,s);if(this.metadataCache.has(o)){const l=this.metadataCache.get(o);return this.log(`📋 Using cached metadata for query '${n}'`),{data:l.data,status:200,statusText:"OK (Cached)",headers:new Headers}}try{const l=await fetch(a,{method:"GET",headers:s}),i=await this.createResponse(l,r.response);return this.metadataCache.set(o,{data:i.data,timestamp:Date.now()}),this.log(`📋 Cached metadata for query '${n}'`),i}catch(l){throw new B(`Query metadata '${n}' failed: ${l}`,void 0,l)}}subscribe(n,e,r){return a=>{const s=this.getRTCConnection(n,r),o=e||"default";return s.isConnected()||s.connect().catch(l=>{console.error(`Failed to connect to socket '${n}':`,l)}),s.subscribe(o,a)}}publish(n,e,r){return a=>{const s=this.getRTCConnection(n,r),o=e||"default";if(!s.isConnected())throw new B(`Socket '${n}' is not connected`);s.publish(o,a)}}async request(n,e,r){const a=this.getRequestConfig(n),s=this.resolveUri(a.uri,r),o=this.resolveHeaders(a.headers,r),l=this.resolveData(a.data,e),i=a.method||"GET",c=["POST","PUT","PATCH"].includes(i);try{const h=await fetch(s,{method:i,headers:{...c&&l?{"Content-Type":"application/json"}:{},...o},body:c&&l?JSON.stringify(l):void 0});return await this.createResponse(h,a.response)}catch(h){throw new B(`Request '${n}' failed: ${h}`,void 0,h)}}getBaseUrl(){return this.config.baseUrl||""}getName(){return this.config.name}disconnectAll(){this.rtcConnections.forEach((n,e)=>{this.log(`🔌 Disconnecting ${e}`),n.disconnect()}),this.rtcConnections.clear()}clearMetadataCache(){this.metadataCache.clear(),this.log("🗑️ Metadata cache cleared")}getMetadataCacheStats(){return{size:this.metadataCache.size,entries:Array.from(this.metadataCache.keys())}}validateConfig(n){if(!n.name)throw new I("API Manager name is required");if(!(n.commands||n.queries||n.sockets||n.requests))throw new I("At least one operation type (commands, queries, sockets, requests) must be configured");return n}getCommandConfig(n){if(!this.config.commands||!this.config.commands[n])throw new I(`Command '${n}' not found in configuration`);return this.config.commands[n]}getQueryConfig(n){if(!this.config.queries||!this.config.queries[n])throw new I(`Query '${n}' not found in configuration`);return this.config.queries[n]}getSocketConfig(n){if(!this.config.sockets||!this.config.sockets[n])throw new I(`Socket '${n}' not found in configuration`);return this.config.sockets[n]}getRequestConfig(n){if(!this.config.requests||!this.config.requests[n])throw new I(`Request '${n}' not found in configuration`);return this.config.requests[n]}resolveUri(n,e){let r;if(typeof n=="function"?r=n(e):r=n,r.includes("?"))throw new I(`URI '${r}' contains a query string. Use ApiParams.search parameter instead.`);if(e!=null&&e.search){let s=new URLSearchParams(e.search);r=r+"?"+s.toString()}let a=(e==null?void 0:e.path)||{};return r=r.replace(/{(\w+)}/g,(s,o)=>{if(a[o])return a[o];throw new I(`Path parameter '${s}' not provided`)}),r.startsWith("http://")||r.startsWith("https://")?r:(this.config.baseUrl||"")+r}resolveHeaders(n,e){let r={};return typeof this.config.processHeaders=="function"&&(r=this.config.processHeaders(e,r)),typeof n=="function"&&(r=n(e,r)),e!=null&&e.headers&&(r={...r,...e.headers}),r}resolveData(n,e){let r=e;return typeof this.config.processData=="function"&&(r=this.config.processData(e)),typeof n=="function"&&(r=n(r)),r}async createResponse(n,e){if(!n.ok){const a=await n.text();throw new B(`HTTP ${n.status}: ${n.statusText}`,n.status,a)}let r={data:await n.json(),status:n.status,statusText:n.statusText,headers:n.headers};return typeof this.config.processResponse=="function"&&(r=this.config.processResponse(r)),typeof e=="function"&&(r=e(r)),r}getRTCConnection(n,e){if(!this.rtcConnections.has(n)){const r=this.getSocketConfig(n),a=Zr.create(r,this.config.baseUrl||"",e);this.rtcConnections.set(n,a)}return this.rtcConnections.get(n)}generateMetadataCacheKey(n,e){if(!e||Object.keys(e).length===0)return n;const r=Object.keys(e).sort().reduce((a,s)=>(a[s]=e[s],a),{});return`${n}:${JSON.stringify(r)}`}log(n,...e){this.debug&&console.log(n,...e)}}const Ae=class{static register(n){const e=new ea(n),r=e.getName();if(this.collectionRegistry.has(r))throw new Error(`APICollection with name '${r}' is already registered.`);return this.collectionRegistry.set(r,e),this.collectionRegistry.size===1&&(this.defaultCollection=e),e}static setDefaultCollection(n){const e=this.collectionRegistry.get(n);if(!e)throw new Error(`APICollection '${n}' is not registered`);this.defaultCollection=e}static getCollection(n){if(!n){if(!this.defaultCollection)throw new Error("No default APICollection set");return this.defaultCollection}const e=this.collectionRegistry.get(n);if(!e)throw new Error(`APICollection '${n}' is not registered`);return e}static parseApiName(n){const[e,r]=n.includes(":")?n.split(/:(.+)/):[null,n];return{collection:this.getCollection(e),name:r}}static query(n,e){const{collection:r,name:a}=this.parseApiName(n);return r.query(a,e)}static queryMeta(n,e){const{collection:r,name:a}=this.parseApiName(n);return r.queryMeta(a,e)}static send(n,e,r){const{collection:a,name:s}=this.parseApiName(n);return a.send(s,e,r)}static request(n,e,r){const{collection:a,name:s}=this.parseApiName(n);return a.request(s,e,r)}static subscribe(n,e,r){const{collection:a,name:s}=this.parseApiName(n);return a.subscribe(s,e,r)}static publish(n,e,r){const{collection:a,name:s}=this.parseApiName(n);return a.publish(s,e,r)}static listCollections(){return Array.from(this.collectionRegistry.keys())}static clear(){this.collectionRegistry.clear(),this.defaultCollection=null}};Ae.collectionRegistry=new Map,Ae.defaultCollection=null;let ta=Ae;st.__docgenInfo={description:"",methods:[],displayName:"Ln"};xt.__docgenInfo={description:"",methods:[],displayName:"rn"};Qr.__docgenInfo={description:"",methods:[],displayName:"ao"};const na={name:"idm",baseUrl:"/api",debug:!0,queries:{user:{uri:"/idm.user/",meta:"/_meta/idm.user/"},organization:{uri:"/idm.organization/",meta:"/_meta/idm.organization/"}},processResponse:t=>{let n=t.data;return n&&n.data&&(t.data=n.data),n&&n.meta&&(t.meta=n.meta),t}};ta.register(na);const ra="",aa=t=>{const n=t.startsWith("/")?t.slice(1):t;return`${ra}/${n}`},sa=async(t,n)=>{const e=aa(t);try{return await fetch(e,n)}catch(r){throw r}},ca=async(t,n)=>{const e=await sa(t,n);if(!e.ok)throw new Error(`API request failed: ${e.status} ${e.statusText}`);const r=await e.json();return console.log("📊 API: JSON data received for",t,r),r},ua={metadata:t=>`_meta/${t}`,data:t=>`${t}/`,userMetadata:()=>"_meta/idm.user",userData:()=>"idm.user/",organizationMetadata:()=>"_meta/idm.organization/",organizationData:()=>"idm.organization/"};export{ra as A,aa as c,ua as e,ca as f,ta as j};
